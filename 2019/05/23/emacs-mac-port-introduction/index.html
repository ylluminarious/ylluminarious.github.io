<!DOCTYPE html>
<html>
<head>
<title>ylluminarious: Emacs Mac Port Introduction</title>
<meta content='Valuable Features &amp;amp; Improvements The Emacs Mac Port is an excellent distribution of Emacs which greatly improves Emacs&amp;rsquo; functionality ...' name='description'>
<meta charset='utf-8'>
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<meta content='IE=edge' http-equiv='X-UA-Compatible'>
<meta content='True' name='HandheldFriendly'>
<meta content='ylluminarious' property='og:site_name'>
<meta content='article' property='og:type'>
<meta content='Emacs Mac Port Introduction' property='og:title'>
<meta content='Valuable Features &amp;amp; Improvements The Emacs Mac Port is an excellent distribution of Emacs which greatly improves Emacs&amp;rsquo; functionality ...' property='og:description'>
<meta content='http://www.example.com/2019/05/23/emacs-mac-port-introduction/' property='og:url'>
<meta content='2019-05-23' property='article:published_time'>
<meta content='summary' name='twitter:card'>
<meta content='Emacs Mac Port Introduction' name='twitter:title'>
<meta content='Valuable Features &amp;amp; Improvements The Emacs Mac Port is an excellent distribution of Emacs which greatly improves Emacs&amp;rsquo; functionality ...' name='twitter:description'>
<meta content='http://www.example.com/2019/05/23/emacs-mac-port-introduction/' name='twitter:url'>
<link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
<link href="/images/favicon.ico" rel="icon" type="image/ico" />
<link href='//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400' rel='stylesheet' type='text/css'>
<link href="/stylesheets/application.css" rel="stylesheet" />
</head>
<body class='post-template nav-closed'>
<div class='nav'>
<h3 class='nav-title'>Menu</h3>
<a class='nav-close' href='#'>
<span class='hidden'>Close</span>
</a>
<ul>
<li class='nav-home'>
<a href='/'>Home</a>
</li>
<li class='nav-about'>
<a href='/2019/04/29/about/'>About</a>
</li>
</ul>
<a class='subscribe-button icon-feed' href='/feed.xml'>Subscribe</a>
</div>
<span class='nav-cover'></span>

<div class='site-wrapper'>
<header class='main-header no-cover post-head'>
<nav class='main-nav clearfix'>
<a class='blog-logo' href='/'>
<img src="/images/the-star-sun-faded-edges.png" alt="ylluminarious" />
</a>
<a class='menu-button icon-menu' href='#'>
<span class='word'>Menu</span>
</a>
</nav>
</header>
<main class='content' role='main'>
<article class='post'>
<header class='post-header'>
<h1 class='post-title'>Emacs Mac Port Introduction</h1>
<section class='post-meta'>
<time class='post-date' datetime='2019-05-23'>
23 May 2019
</time>
</section>
</header>
<section class='post-content'><h2>Valuable Features &amp; Improvements</h2>

<p><a href="https://bitbucket.org/mituharu/emacs-mac/src/master/README-mac" rel="nofollow">The Emacs Mac
Port</a> is an
excellent distribution of Emacs which greatly improves Emacs&rsquo; functionality on
macOS. It adds native GUI support which provides a slew of nice features. I
would like to name some of those features which I particularly enjoy, so please
note that this is not a full list of the features and improvements. If you would
like a full list, check out <a href="https://bitbucket.org/mituharu/emacs-mac/src/master/README-mac" rel="nofollow">the README
file</a> which is
well worth your time if you use macOS and Emacs. The following items are taken
from there, so again, if it looks like something is missing, then please look at
the full list because these are just <em>my</em> favorite features:</p>

<ul>
<li><p>Better <code>C-g</code> handling</p></li>
<li><p>It doesn&rsquo;t use CPU time while the Lisp interpreter is idle and waiting for
some events to come, even with subprocesses or network connections.</p></li>
<li><p>Graceful termination: If you try logout/shutdown/reboot while leaving a
file-visiting buffer modified and unsaved, a popup window appears for
confirmation. If you cancel the termination of Emacs (including C-g or ESC),
the whole logout/shutdown/reboot process is also canceled immediately (i.e.,
you will see a &ldquo;canceled&rdquo; dialog immediately rather than a &ldquo;timed out&rdquo; one
afterward). If you don&rsquo;t have unsaved buffers, shell buffers, etc., you
won&rsquo;t see unnecessary confirmation.</p></li>
<li><p>Apple event handling: One can define Apple event handlers at the Lisp level.
Actually, graceful termination above is an instance of Lisp-level Apple
event handling. Another example is &ldquo;Get URL&rdquo; handler that enables us to
invoke the mailer you customized with <code>mail-user-agent</code>, e.g.,</p></li>
</ul>
<div class="highlight"><pre class="highlight plaintext"><code>$ osascript -e 'tell application "Emacs" to open location "mailto:foo@example.com"'
</code></pre></div>
<p>If you set Emacs as the default mailer via Mail.app preference, the Emacs mailer
will set up a draft buffer when you click a <code>mailto:</code> link in a Web browser.</p>

<ul>
<li><p>DictionaryService support: You can look up a word under the mouse pointer in
the selected window by typing <code>Command-Control-D</code> (or double/single-tapping
a trackpad with three fingers on Mac OS X 10.7/10.8, resp.).</p></li>
<li><p>Some minor visual enhancements</p>

<ul>
<li>  Aligned key bindings in menus</li>
<li>  Progress indicator (corresponding to hourglass) in the title bar</li>
<li>  Unusable items in the font panel are hidden</li>
</ul></li>
<li><p>The <code>fullscreen</code> frame parameter, with all values supported: <code>fullboth</code>,
<code>fullwidth</code>, <code>fullheight</code>, and <code>maximized</code>. The <code>fullboth</code> frames, which
don&rsquo;t have the title bar, still allow us to access the menu bar, the Dock,
and the tool bars. The menu bar can also be activated via <code>menu-bar-open</code>,
<code>Control-F2</code> (if full keyboard access enabled), or <code>Command-Shift-/</code> (on Mac
OS X 10.5 and later) even for fullboth frames where the menu bar is usually
hidden. Changing fonts or internal-border-width in fullscreen frames does
not clutter display. On multiple monitor environments, one can move
fullscreen frames to another monitor by setting the <code>left</code> and <code>top</code> frame
parameters accordingly. Attaching/detaching external monitors should work
even with fullscreen frames.</p></li>
<li><p>The <code>sticky</code> frame parameter, which allows us to keep particular frames
visible for all Spaces on Mac OS X 10.5 and later.</p></li>
<li><p>The function <code>system-move-file-to-trash</code>, which can be specified as a value
of <code>delete-by-moving-to-trash</code>.</p></li>
<li><p>SVG image display. This can be done via the WebKit framework, so you don&rsquo;t
need librsvg.</p></li>
<li><p>Unicode character display including non-BMP ones.</p></li>
<li><p>Complex Text Layout and text shaping. They are implemented using the Core
Text or NS Text layout engine, so you don&rsquo;t need libotf.</p></li>
<li><p>Can be compiled with the ImageMagick support. Even without the ImageMagick
library, the Mac port provides a fallback using the Image I/O framework so
you can scale and rotate images.</p></li>
<li><p>The variable <code>tool-bar-style</code> works like in GTK+. The values <code>both-horiz</code>,
<code>text-image-horiz</code> are synonymous with <code>both</code>.</p></li>
<li><p>Horizontal scroll bar support.</p></li>
<li><p>Pixel-based mouse wheel smooth scroll for newer mice/trackpads.</p></li>
<li><p>Gesture event handling for newer trackpads. By default, pinch out/in are
bound to text size scaling. With the shift key, they turn on/off fullscreen
status of the frame.</p></li>
<li><p>&ldquo;Click in the scroll bar to: Jump to the spot that&rsquo;s clicked&rdquo; setting in the
System Preferences is supported. Pressing the option key while clicking
toggles this behavior temporarily.</p></li>
<li><p>Change of text smoothing threshold setting in the Appearance pane of the
System Preferences is reflected immediately.</p></li>
<li><p>Several keyboard shortcuts (notably those for Keyboard Navigation) listed in
System Preferences just work like other applications.</p></li>
<li><p>When the clipboard has both textual and image data, yank inserts the former
and push both into the kill ring so the latter can be inserted with yank-pop
afterwards.</p></li>
<li><p>Can display color bitmap fonts such as Apple Color Emoji, if compiled and
executed on Mac OS X 10.7 or later. Also supports display of some
combinations of regional indicator symbols, such as U+1F1EF followed by
U+1F1F5, as national flags. Variation Selectors 15 (text-style) and 16
(emoji-style) are also supported. On OS X 10.10.3 and later, emoji modifiers
for skin tones (U+1F3FB - U+1F3FF) are supported as well.</p></li>
<li><p>New function `mac-start-animation&rsquo;, which provides animation effects on Mac
OS 10.5 and later via Core Animation. You can see the default animations
with buffer switching by horizontal swiping/flicking, exiting from the
splash screen by typing &ldquo;q&rdquo;, and the &ldquo;About Emacs&rdquo; and &ldquo;Preferences&hellip;&rdquo; menu
items in the application menu (labeled &ldquo;Emacs&rdquo;) in the menu bar.</p></li>
<li><p>High-resolution image display support for Retina displays. Dynamic
resolution change is also supported. For bitmap formats, high-resolution
data can be specified either by the &ldquo;\@2x&rdquo; file name convention, the
&ldquo;:data-2x&rdquo; property, or multi-image TIFF. Shrinking a large image with the
&ldquo;imagemagick&rdquo; (or Mac-specific &ldquo;image-io&rdquo;) image type also works but gives a
non-optimal result on dynamic resolution change. For vector formats, images
are automatically re-rendered according to the resolution of the frame.
DocView mode and LaTeX fragment preview in Org mode are modified so they can
take advantage of this feature.</p></li>
</ul>

<p>At the time of this writing, it is more than just an improvement; <a href="https://lists.gnu.org/archive/html/emacs-devel/2019-03/msg00901.html" rel="nofollow">it lacks a
bug</a> in
the official NS Port <a href="https://debbugs.gnu.org/cgi/bugreport.cgi?bug=32864" rel="nofollow">which breaks menus on
Mojave.</a> Suffice it to say,
the Emacs Mac Port is my current choice of Emacs distro and the best choice I&rsquo;ve
seen for macOS (<a href="http://aquamacs.org/" rel="nofollow">Aquamacs is another good one,</a> but
unfortunately it does not integrate with the native macOS GUI and its changes
only exist at the Lisp level).</p>

<p>The only problem it has is lack of multi-tty support, but I managed to fix this
issue <a href="/2019/05/23/how-to-fix-the-emacs-mac-port-for-multi-tty-access/" rel="nofollow">which I documented
here.</a></p>

<h2>History &amp; Future</h2>

<p>The Emacs Mac Port is developed and maintained by Mitsuharu Yamamoto and it
regularly pulls changes from GNU Emacs proper, thus staying up-to-date with it.
It exists as a fork because at the time of its initial release, <a href="https://lists.gnu.org/archive/html/emacs-devel/2019-03/msg00895.html" rel="nofollow">it wasn&rsquo;t quite
ready</a> so
the Emacs developers chose the so-called NS Port instead (which is now
technically inferior). Why is it called the NS Port? Because Emacs historically
preferred the term
<a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Mac-OS-_002f-GNUstep.html" rel="nofollow">&ldquo;Nextstep&rdquo;,</a>
presumably due to a desire to support
<a href="https://en.wikipedia.org/wiki/GNUstep" rel="nofollow">GNUstep.</a> <a href="https://lists.gnu.org/archive/html/emacs-devel/2019-03/msg00919.html" rel="nofollow">The maintainer of the NS Port
acknowledged that the Mac Port does a better job in a number of
areas:</a></p>

<blockquote>
<p>The Mac port has a better maintainer than me, who knows the toolkit and
  things better than I could ever hope to. It ties into macOS better (I use
  very little macOS specific software, and the whole ‘services’ thing is a
  mystery to me, for example). It doesn’t have the Mojave redraw problems that
  have me completely scunnered at the moment. It handles concurrency better.
  It is simply better maintained.</p>
</blockquote>

<p>Yet its use of features not supported by GCC might rule it out as a replacement
candidate:</p>

<blockquote>
<p>But then again, the Mac port makes use of things that gcc doesn’t support,
  like ObjC blocks, so that would probably rule it out as an official port
  immediately.</p>

<p>The duplication of effort to maintain two ports seems like a waste to me,
  but there are definitely barriers to joining forces and having only one,
  official, port.</p>
</blockquote>

<p>This could cause Richard Stallman to be against merging the Mac Port in place of
the NS Port <a href="https://gcc.gnu.org/ml/gcc/2014-01/msg00247.html" rel="nofollow">because he wants GNU projects to use
GCC.</a> He may also object to it
if he perceives that it supports features not found on Linux, <a href="https://github.com/emacs-mirror/emacs/blob/emacs-25.1/etc/NEWS#L1723-L1730" rel="nofollow">as he has been
known to raise such issues in the
past.</a></p>

<p>I think it is too bad that the Mac Port has not yet replaced the NS Port because
it is superior with its native macOS integration. The developer has clearly
worked hard and his work is praiseworthy. I hope the Emacs developers do not
allow the aforementioned issues to be obstacles which disallow the Mac Port from
merging into the Emacs source code.</p>
</section>
<footer class='post-footer'>
<section class='author'>
<h4>
<a href='/author/ylluminarious/'>ylluminarious</a>
</h4>
<p></p>
I'm a software developer. I'm also the author of this blog.
</section>
<section class='share'>
<h4>Share this post</h4>
<a class='icon-twitter' href='https://twitter.com/intent/tweet?text=Emacs Mac Port Introduction&amp;amp;url=http://www.example.com/2019/05/23/emacs-mac-port-introduction/' onclick='window.open(this.href, &#39;twitter-share&#39;, &#39;width=550,height=235&#39;);return false;'>
<span class='hidden'>Twitter</span>
</a>
<a class='icon-facebook' href='https://www.facebook.com/sharer/sharer.php?u=http://www.example.com/2019/05/23/emacs-mac-port-introduction/' onclick='window.open(this.href, &#39;facebook-share&#39;,&#39;width=580,height=296&#39;);return false;'>
<span class='hidden'>Facebook</span>
</a>
<a class='icon-google-plus' href='https://plus.google.com/share?url=http://www.example.com/2019/05/23/emacs-mac-port-introduction/' onclick='window.open(this.href, &#39;google-plus-share&#39;, &#39;width=490,height=530&#39;);return false;'>
<span class='hidden'>Google+</span>
</a>
</section>
</footer>
</article>
</main>
<aside class='read-next'>
<a class='no-cover read-next-story' href='/2019/05/23/how-to-fix-the-emacs-mac-port-for-multi-tty-access/'>
<section class='post'>
<h2>How to fix the Emacs Mac Port for multi-tty access</h2>
<p>Introduction to the Emacs Mac Port The Emacs Mac Port is an excellent distribution of Emacs which greatly improves&hellip;</p>
</section>
</a>
<a class='no-cover prev read-next-story' href='/2019/06/13/how-i-solved-a-cryptic-emacs-dumping-error/'>
<section class='post'>
<h2>How I solved a cryptic Emacs dumping error</h2>
<p>Background While I was trying to compile Emacs to test a fix, I ran into a compilation error. This&hellip;</p>
</section>
</a>
</aside>

<footer class='site-footer clearfix'>
<section class='copyright'>
<a href='/'>ylluminarious</a>
&copy;
2019
</section>
<section class='poweredby'>
Casper theme powered by
<a href='https://ghost.org'>Ghost</a>
</section>
</footer>
</div>
<script src="/javascripts/application.js"></script>
</body>
</html>
